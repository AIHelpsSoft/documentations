# AIHelps How to set up Google Analytics from Online module

## Prewords

This documentation described actions needed to set up GA (_It's Google analytics below we will called it like this_) from Online module.
If you have any questions, feel free to contact _[telegram group](https://t.me/joinchat/EVNM_kgTp_iDmHv0Z-1npg)_ for more info.

## Preparing

1. You need to have GA account how to get it [see here by the link](https://support.google.com/analytics/answer/10089681?hl=ru&ref_topic=9143232)
2. Also you need CRM and Configured Online Module

## Get Started:

1. Go to your CRM, select the _settings section -> online module settings_
2. Select _"Размещение в интернете"_
   <img src="https://raw.githubusercontent.com/AIHelpsSoft/documentations/master/images/how_to_use_analytics_from_online_module_img1.jpg" />
3. Then find the _analytics section_ and set up the Tracking ID (your Tracking Code). You able to figure out how to get it [by link](https://support.google.com/analytics/answer/9310895)
   <img src="https://raw.githubusercontent.com/AIHelpsSoft/documentations/master/images/how_to_use_analytics_from_online_module_img3.jpg" />

Described all events in [table below](#events)

## Events <a name="events"></a>

| Event Category | Event Action | Event Label                      | Description                                                                                 |
| -------------- | ------------ | -------------------------------- | ------------------------------------------------------------------------------------------- |
| `Appointment`  | `New`        | `clientId` client id in database | Send it when client has booked new appointment, **clientId** - it's client id from your CRM |

If you want added new events or added new features
please report it in this repository or [at AI Helps telegram group](https://t.me/joinchat/EVNM_kgTp_iDmHv0Z-1npg).

## Integrate with another analytics system

If you want to integrate with another analytics system, you need to use `onAnalyticsEvent` from _[init script](https://github.com/AIHelpsSoft/documentations/blob/master/ModuleInitialScript.md)_.

`onAnalyticsEvent` calls when new analytics event appears, the first argument in this callback functions is payload data for analytics event.

Example of first argument:
<img src="https://raw.githubusercontent.com/AIHelpsSoft/documentations/master/images/first-argument-onAnalyticsEvent.jpg" />

For example integrate with _[amplitude](https://amplitude.com/)_:

```js
// initialize the client
var instance = amplitude.getInstance().init(AMPLITUDE_API_KEY);

init({
  database: 503953 /** your database code, this value is required */,
  color: "#a7a7d7",
  position: "bottom right",
  text: "Click me!",
  designTheme: "normal",
  onAnalyticsEvent: (data) => {
    amplitude.getInstance().logEvent(data);
  },
});
```

## Troubleshooting

If not, you might have added a filter, to filter out events generated by traffic from your own IP. You can find this filter under "admin" and then "all filters". If so, remove it (or temporarily change the IP-address, so it doesn't match). After that, generate a few events on your website and look again on the google-analytics page, under realtime traffic / events page.

---

If you notice an error or some documentation doesn't match the execution behavior the programs,
please report the issues in this repository or [at AI Helps telegram group](https://t.me/joinchat/EVNM_kgTp_iDmHv0Z-1npg).

Thanks for using AIHelps solutions
